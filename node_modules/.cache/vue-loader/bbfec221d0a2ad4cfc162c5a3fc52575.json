{"remainingRequest":"D:\\Programs\\Project\\project-eveil\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Programs\\Project\\project-eveil\\src\\components\\message\\message_main copy.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Programs\\Project\\project-eveil\\src\\components\\message\\message_main copy.vue","mtime":1587231375683},{"path":"D:\\Programs\\Project\\project-eveil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\project-eveil\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\project-eveil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\project-eveil\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhOiBmdW5jdGlvbigpIHsNCiAgICByZXR1cm4gew0KICAgICAgaWQ6ICIiLA0KICAgICAgcHJldl9wYWdlOiAiIiwNCiAgICAgIG1lc3NhZ2U6ICIiLA0KICAgICAgc3ViamVjdDogIiIsDQogICAgICBmcm9tOiBudWxsLA0KICAgICAgdG86IG51bGwsDQogICAgICB0aW1lOiAiIiwNCiAgICAgIGRhdGU6ICIiLA0KICAgICAgZW1haWw6ICIiLA0KICAgICAgdXNlcm5hbWU6ICIiLA0KICAgICAgbm9EYXRhRmxhZzogbnVsbCwNCiAgICAgIHF1ZXJ5VVJMOndpbmRvdy5sb2NhdGlvbi5zZWFyY2gNCiAgICB9Ow0KICB9LA0KICBtZXRob2RzOiB7DQogICAgcGFyc2VGcm9tVXJsKCkgew0KICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaDsNCiAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocXVlcnlTdHJpbmcpOw0KICAgICAgdGhpcy5pZCA9IHVybFBhcmFtcy5nZXQoImlkIik7DQogICAgICB0aGlzLnByZXZfcGFnZSA9IHVybFBhcmFtcy5nZXQoInByZXYiKTsNCiAgICB9LA0KICAgIGdldERhdGEoKSB7DQogICAgICB0aGlzLmVtYWlsID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmVtYWlsOw0KICAgICAgdGhpcy51c2VybmFtZSA9IHRoaXMuZW1haWwuc3Vic3RyaW5nKDAsIHRoaXMuZW1haWwubGVuZ3RoIC0gMTApOw0KDQogICAgICB2YXIgcmVmVXNlciA9ICJlbWFpbHMvIiArIHRoaXMudXNlcm5hbWU7DQogICAgICBpZiAodGhpcy5wcmV2X3BhZ2UgPT0gIm91dGJveCIpIHJlZlVzZXIgKz0gIi9zZW50LyI7DQogICAgICBlbHNlIGlmICh0aGlzLnByZXZfcGFnZSA9PSAiaW5ib3giKSByZWZVc2VyICs9ICIvcmVjZWl2ZWQvIjsNCiAgICAgIGVsc2UgaWYgKHRoaXMucHJldl9wYWdlID09ICJ2ZWlsYm94IikgcmVmVXNlciArPSAiL3ZlaWxib3gvIjsNCiAgICAgIHJlZlVzZXIgKz0gdGhpcy5pZDsNCiAgICAgIHZhciBlbWFpbHNSZWYgPSBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZihyZWZVc2VyKTsNCiAgICAgIGVtYWlsc1JlZi5vbigNCiAgICAgICAgInZhbHVlIiwNCiAgICAgICAgZGF0YSA9PiB7DQogICAgICAgICAgdmFyIGFsbGRhdGEgPSBkYXRhLnZhbCgpOw0KICAgICAgICAgIGlmIChhbGxkYXRhID09PSBudWxsIHx8IGFsbGRhdGEgPT09IHVuZGVmaW5lZCkgew0KICAgICAgICAgICAgdGhpcy5ub0RhdGFGbGFnID0gZmFsc2U7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMubm9EYXRhRmxhZyA9IHRydWU7DQogICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBhbGxkYXRhLm1lc3NhZ2U7DQogICAgICAgICAgICB0aGlzLnN1YmplY3QgPSBhbGxkYXRhLnN1YmplY3Q7DQogICAgICAgICAgICBpZiAoYWxsZGF0YS5mcm9tKSB0aGlzLmZyb20gPSBhbGxkYXRhLmZyb207DQogICAgICAgICAgICBpZiAoYWxsZGF0YS50bykgdGhpcy50byA9IGFsbGRhdGEudG87DQogICAgICAgICAgICB0aGlzLnRpbWUgPSBhbGxkYXRhLnRpbWU7DQogICAgICAgICAgICB0aGlzLmRhdGUgPSBhbGxkYXRhLmRhdGU7DQogICAgICAgICAgfQ0KICAgICAgICB9LA0KICAgICAgICBlcnJFbWFpbHNEYXRhID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJFbWFpbHNEYXRhKTsNCiAgICAgICAgfQ0KICAgICAgKTsNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5wYXJzZUZyb21VcmwoKTsNCiAgICB0aGlzLmdldERhdGEoKTsNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICBxdWVyeVVSTDpmdW5jdGlvbigpew0KICAgICAgY29uc29sZS5sb2coJ0NoYW5nZSEnKTsNCiAgICB9DQogIH0sDQogIHVwZGF0ZWQoKSB7DQogICAgY29uc29sZS5sb2coIlVwZGF0ZSIpOw0KICB9DQp9Ow0K"},{"version":3,"sources":["message_main copy.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"message_main copy.vue","sourceRoot":"src/components/message","sourcesContent":["<template>\r\n  <div>\r\n    <!-- Topbar -->\r\n    <component v-bind:is=\"'Navbar'\"></component>\r\n    <div class=\"wrapper-body\">\r\n      <!-- Sidebar -->\r\n      <component v-bind:is=\"'Sidebar'\"></component>\r\n      <div class=\"body-container\">\r\n        <div class=\"row\" v-if=\"noDataFlag==true\">\r\n          <div class=\"col-8\" v-if=\"from\">From: {{ from }}</div>\r\n          <div class=\"col-8\" v-else>To: {{ to }}</div>\r\n          <div class=\"col-8\">Subject: {{ subject }}</div>\r\n          <div class=\"col-8\">\r\n            Message:\r\n            <p>{{ message }}</p>\r\n            <p>ID: {{id}}</p>\r\n          </div>\r\n          <div class=\"col-8\">\r\n            Received at:\r\n            <p>{{ time+\" \"+date }}</p>\r\n          </div>\r\n        </div>\r\n        <div v-if=\"noDataFlag==false\">No data available</div>\r\n        <div v-if=\"noDataFlag==null\">Loading</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport firebase from \"firebase\";\r\nexport default {\r\n  data: function() {\r\n    return {\r\n      id: \"\",\r\n      prev_page: \"\",\r\n      message: \"\",\r\n      subject: \"\",\r\n      from: null,\r\n      to: null,\r\n      time: \"\",\r\n      date: \"\",\r\n      email: \"\",\r\n      username: \"\",\r\n      noDataFlag: null,\r\n      queryURL:window.location.search\r\n    };\r\n  },\r\n  methods: {\r\n    parseFromUrl() {\r\n      var queryString = window.location.search;\r\n      const urlParams = new URLSearchParams(queryString);\r\n      this.id = urlParams.get(\"id\");\r\n      this.prev_page = urlParams.get(\"prev\");\r\n    },\r\n    getData() {\r\n      this.email = firebase.auth().currentUser.email;\r\n      this.username = this.email.substring(0, this.email.length - 10);\r\n\r\n      var refUser = \"emails/\" + this.username;\r\n      if (this.prev_page == \"outbox\") refUser += \"/sent/\";\r\n      else if (this.prev_page == \"inbox\") refUser += \"/received/\";\r\n      else if (this.prev_page == \"veilbox\") refUser += \"/veilbox/\";\r\n      refUser += this.id;\r\n      var emailsRef = firebase.database().ref(refUser);\r\n      emailsRef.on(\r\n        \"value\",\r\n        data => {\r\n          var alldata = data.val();\r\n          if (alldata === null || alldata === undefined) {\r\n            this.noDataFlag = false;\r\n          } else {\r\n            this.noDataFlag = true;\r\n            this.message = alldata.message;\r\n            this.subject = alldata.subject;\r\n            if (alldata.from) this.from = alldata.from;\r\n            if (alldata.to) this.to = alldata.to;\r\n            this.time = alldata.time;\r\n            this.date = alldata.date;\r\n          }\r\n        },\r\n        errEmailsData => {\r\n          console.log(errEmailsData);\r\n        }\r\n      );\r\n    }\r\n  },\r\n  created() {\r\n    this.parseFromUrl();\r\n    this.getData();\r\n  },\r\n  watch: {\r\n    queryURL:function(){\r\n      console.log('Change!');\r\n    }\r\n  },\r\n  updated() {\r\n    console.log(\"Update\");\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}