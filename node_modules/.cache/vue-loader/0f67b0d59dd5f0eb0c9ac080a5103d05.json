{"remainingRequest":"D:\\Programs\\Project\\Project-E-Veil\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Programs\\Project\\Project-E-Veil\\src\\components\\binbox\\binbox_main.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Programs\\Project\\Project-E-Veil\\src\\components\\binbox\\binbox_main.vue","mtime":1587572020266},{"path":"D:\\Programs\\Project\\Project-E-Veil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\Project-E-Veil\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\Project-E-Veil\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Programs\\Project\\Project-E-Veil\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UiOw0KaW1wb3J0IFZ1ZVRhYmxlRHluYW1pYyBmcm9tICJ2dWUtdGFibGUtZHluYW1pYyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGE6IGZ1bmN0aW9uKCkgew0KICAgIHJldHVybiB7DQogICAgICB1c2VybmFtZTogIiIsDQogICAgICBlbWFpbDogIiIsDQogICAgICBzZWxlY3RNc2dGbGFnOiBmYWxzZSwNCiAgICAgIG5vRGF0YUZvdW5kRmxhZzogbnVsbCwNCiAgICAgIHVwZGF0ZVRpbWU6ICIgIiwNCiAgICAgIHBhcmFtczogew0KICAgICAgICBkYXRhOiBbWyJGcm9tL1RvIiwgIlRpdGxlIiwgIkRlc2NyaXB0aW9uIiwgImlkIiwgInNyYyJdXSwNCiAgICAgICAgaGVhZGVyOiAicm93IiwNCiAgICAgICAgc3RyaXBlOiB0cnVlLA0KICAgICAgICBzaG93Q2hlY2s6IHRydWUsDQogICAgICAgIGVuYWJsZVNlYXJjaDogdHJ1ZSwNCiAgICAgICAgc29ydDogWzAsIDFdLA0KICAgICAgICBwYWdpbmF0aW9uOiB0cnVlLA0KICAgICAgICBwYWdlU2l6ZTogMTAsDQogICAgICAgIHBhZ2VTaXplczogWzEwLCAyMCwgNTBdLA0KICAgICAgICBjb2x1bW5XaWR0aDogWw0KICAgICAgICAgIHsgY29sdW1uOiAwLCB3aWR0aDogIjIwJSIgfSwNCiAgICAgICAgICB7IGNvbHVtbjogMSwgd2lkdGg6ICIzMCUiIH0sDQogICAgICAgICAgeyBjb2x1bW46IDIsIHdpZHRoOiAiNTAlIiB9LA0KICAgICAgICAgIHsgY29sdW1uOiAzLCB3aWR0aDogIjAlIiB9LA0KICAgICAgICAgIHsgY29sdW1uOiA0LCB3aWR0aDogIjAlIiB9DQogICAgICAgIF0NCiAgICAgIH0NCiAgICB9Ow0KICB9LA0KICBjb21wb25lbnRzOiB7IFZ1ZVRhYmxlRHluYW1pYyB9LA0KICBtZXRob2RzOiB7DQogICAgZ2V0Q2xpY2tlZFJvdyhpbmRleCwgZGF0YSkgew0KICAgICAgLy9jb25zb2xlLmxvZygiZ2V0Q2xpY2tlZFJvdyAgOiIsIGluZGV4LCBkYXRhKTsNCiAgICAgIGlmIChpbmRleCA9PSAwKSByZXR1cm47DQogICAgICB2YXIgdXJsID0gIi9tZXNzYWdlLyIgKyBkYXRhWzNdOw0KICAgICAgaWYgKGRhdGFbNF0gPT0gInJlY2VpdmVkIikgdXJsICs9ICIvaW5ib3giOw0KICAgICAgaWYgKGRhdGFbNF0gPT0gInNlbnQiKSB1cmwgKz0gIi9vdXRib3giOw0KICAgICAgaWYgKGRhdGFbNF0gPT0gInZlaWxib3giKSB1cmwgKz0gIi92ZWlsYm94IjsNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHVybCk7DQogICAgfSwNCiAgICBnZXREYXRhRnJvbUZpcmViYXNlKGZyb20pIHsNCiAgICAgIHZhciByZWZVc2VyID0gImVtYWlscy8iICsgdGhpcy51c2VybmFtZSArICIvIiArIGZyb207DQogICAgICB2YXIgZW1haWxzUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYocmVmVXNlcik7DQogICAgICBlbWFpbHNSZWYub24oDQogICAgICAgICJ2YWx1ZSIsDQogICAgICAgIGRhdGEgPT4gew0KICAgICAgICAgIHZhciBhbGxkYXRhID0gZGF0YS52YWwoKTsNCiAgICAgICAgICBpZiAoYWxsZGF0YSAhPSBudWxsICYmIGFsbGRhdGEgIT0gdW5kZWZpbmVkKSB7DQogICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGFsbGRhdGEpOw0KICAgICAgICAgICAga2V5cy5yZXZlcnNlKCk7DQogICAgICAgICAgICBrZXlzLmZvckVhY2goaW5kZXggPT4gew0KICAgICAgICAgICAgICBpZiAoYWxsZGF0YVtpbmRleF0uYmluID09ICIxIikgew0KICAgICAgICAgICAgICAgIHRoaXMubm9EYXRhRm91bmRGbGFnID0gZmFsc2U7DQogICAgICAgICAgICAgICAgdmFyIHRlbXAgPSBuZXcgQXJyYXkoNSk7DQogICAgICAgICAgICAgICAgaWYgKGZyb20gPT0gInJlY2VpdmVkIiB8fCBmcm9tID09ICJ2ZWlsYm94IikNCiAgICAgICAgICAgICAgICAgIHRlbXBbMF0gPSBhbGxkYXRhW2luZGV4XS5mcm9tOw0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZyb20gPT0gInNlbnQiKSB0ZW1wWzBdID0gYWxsZGF0YVtpbmRleF0udG87DQogICAgICAgICAgICAgICAgdGVtcFsxXSA9IGFsbGRhdGFbaW5kZXhdLnN1YmplY3Q7DQogICAgICAgICAgICAgICAgdGVtcFsyXSA9IGFsbGRhdGFbaW5kZXhdLm1lc3NhZ2U7DQogICAgICAgICAgICAgICAgdGVtcFszXSA9IGluZGV4Ow0KICAgICAgICAgICAgICAgIGlmIChmcm9tID09ICJyZWNlaXZlZCIpIHRlbXBbNF0gPSAicmVjZWl2ZWQiOw0KICAgICAgICAgICAgICAgIGVsc2UgaWYgKGZyb20gPT0gInZlaWxib3giKSB0ZW1wWzRdID0gInZlaWxib3giOw0KICAgICAgICAgICAgICAgIGVsc2UgdGVtcFs0XSA9ICJzZW50IjsNCiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtcy5kYXRhLnB1c2godGVtcCk7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgZXJyRW1haWxzRGF0YSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyRW1haWxzRGF0YSk7DQogICAgICAgIH0NCiAgICAgICk7DQogICAgfSwNCiAgICBnZXREYXRhKCkgew0KICAgICAgdGhpcy5nZXREYXRhRnJvbUZpcmViYXNlKCJyZWNlaXZlZCIpOw0KICAgICAgdGhpcy5nZXREYXRhRnJvbUZpcmViYXNlKCJzZW50Iik7DQogICAgICB0aGlzLmdldERhdGFGcm9tRmlyZWJhc2UoInZlaWxib3giKTsNCiAgICAgIGlmICh0aGlzLnBhcmFtcy5kYXRhLmxlbmd0aCA+IDEpIHRoaXMubm9EYXRhRm91bmRGbGFnID0gZmFsc2U7DQogICAgICBlbHNlIHRoaXMubm9EYXRhRm91bmRGbGFnID0gdHJ1ZTsNCiAgICAgIHRoaXMucHJpbnRQcmVzZW50VGltZSgpOw0KICAgIH0sDQogICAgcHJpbnRQcmVzZW50VGltZSgpIHsNCiAgICAgIHZhciB0b2RheSA9IG5ldyBEYXRlKCk7DQogICAgICB0aGlzLnVwZGF0ZVRpbWUgPQ0KICAgICAgICB0b2RheS5nZXRIb3VycygpICsgIjoiICsgdG9kYXkuZ2V0TWludXRlcygpICsgIjoiICsgdG9kYXkuZ2V0U2Vjb25kcygpOw0KICAgIH0sDQogICAgb25TZWxlY3Rpb25DaGFuZ2UoKSB7DQogICAgICBpZiAodGhpcy4kcmVmcy50YWJsZS5nZXRDaGVja2VkUm93RGF0YXModHJ1ZSkubGVuZ3RoID4gMSkgew0KICAgICAgICB0aGlzLnNlbGVjdE1zZ0ZsYWcgPSB0cnVlOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5zZWxlY3RNc2dGbGFnID0gZmFsc2U7DQogICAgICB9DQogICAgfSwNCiAgICBkZWxldGVfcmVjb3Zlcl9TZWxlY3RlZE1zZyhmbGFnKSB7DQogICAgICB2YXIgcmVjZWl2ZWRfZW1haWxPYmogPSBuZXcgT2JqZWN0KCk7DQogICAgICB2YXIgc2VudF9lbWFpbE9iaiA9IG5ldyBPYmplY3QoKTsNCiAgICAgIHZhciB2ZWlsYm94X2VtYWlsT2JqID0gbmV3IE9iamVjdCgpOw0KICAgICAgdmFyIHJlY19kYXRhRmxhZyA9IGZhbHNlOw0KICAgICAgdmFyIHNlbnRfZGF0YUZsYWcgPSBmYWxzZTsNCiAgICAgIHZhciB2ZWlsX2RhdGFGbGFnID0gZmFsc2U7DQogICAgICB2YXIgdmFsOw0KICAgICAgaWYgKGZsYWcgPT0gImRlbGV0ZSIpIHZhbCA9IG51bGw7DQogICAgICBlbHNlIGlmIChmbGFnID09ICJyZWNvdmVyIikgdmFsID0gIjAiOw0KICAgICAgZm9yICgNCiAgICAgICAgdmFyIGkgPSAxOw0KICAgICAgICBpIDwgdGhpcy4kcmVmcy50YWJsZS5nZXRDaGVja2VkUm93RGF0YXModHJ1ZSkubGVuZ3RoOw0KICAgICAgICBpKysNCiAgICAgICkgew0KICAgICAgICB2YXIgeDsNCiAgICAgICAgaWYgKHRoaXMuJHJlZnMudGFibGUuZ2V0Q2hlY2tlZFJvd0RhdGFzKHRydWUpW2ldWzRdID09ICJyZWNlaXZlZCIpIHsNCiAgICAgICAgICB4ID0gdGhpcy4kcmVmcy50YWJsZS5nZXRDaGVja2VkUm93RGF0YXModHJ1ZSlbaV1bM10gKyAiIjsNCiAgICAgICAgICBpZiAodmFsID09ICIwIikgeCArPSAiL2JpbiI7DQogICAgICAgICAgcmVjZWl2ZWRfZW1haWxPYmpbeF0gPSB2YWw7DQogICAgICAgICAgcmVjX2RhdGFGbGFnID0gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLiRyZWZzLnRhYmxlLmdldENoZWNrZWRSb3dEYXRhcyh0cnVlKVtpXVs0XSA9PSAic2VudCIpIHsNCiAgICAgICAgICB4ID0gdGhpcy4kcmVmcy50YWJsZS5nZXRDaGVja2VkUm93RGF0YXModHJ1ZSlbaV1bM10gKyAiIjsNCiAgICAgICAgICBpZiAodmFsID09ICIwIikgeCArPSAiL2JpbiI7DQogICAgICAgICAgc2VudF9lbWFpbE9ialt4XSA9IHZhbDsNCiAgICAgICAgICBzZW50X2RhdGFGbGFnID0gdHJ1ZTsNCiAgICAgICAgfSBlbHNlIGlmICgNCiAgICAgICAgICB0aGlzLiRyZWZzLnRhYmxlLmdldENoZWNrZWRSb3dEYXRhcyh0cnVlKVtpXVs0XSA9PSAidmVpbGJveCINCiAgICAgICAgKSB7DQogICAgICAgICAgeCA9IHRoaXMuJHJlZnMudGFibGUuZ2V0Q2hlY2tlZFJvd0RhdGFzKHRydWUpW2ldWzNdICsgIiI7DQogICAgICAgICAgaWYgKHZhbCA9PSAiMCIpIHggKz0gIi9iaW4iOw0KICAgICAgICAgIHZlaWxib3hfZW1haWxPYmpbeF0gPSB2YWw7DQogICAgICAgICAgdmVpbF9kYXRhRmxhZyA9IHRydWU7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnBhcmFtcy5kYXRhLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmIChyZWNfZGF0YUZsYWcgJiYgdGhpcy5wYXJhbXMuZGF0YVtpXVs0XSA9PSAicmVjZWl2ZWQiKSB7DQogICAgICAgICAgdGhpcy5wYXJhbXMuZGF0YS5zcGxpY2UoaSwgMSk7DQogICAgICAgICAgaS0tOw0KICAgICAgICB9IGVsc2UgaWYgKHNlbnRfZGF0YUZsYWcgJiYgdGhpcy5wYXJhbXMuZGF0YVtpXVs0XSA9PSAic2VudCIpIHsNCiAgICAgICAgICB0aGlzLnBhcmFtcy5kYXRhLnNwbGljZShpLCAxKTsNCiAgICAgICAgICBpLS07DQogICAgICAgIH0gZWxzZSBpZiAodmVpbF9kYXRhRmxhZyAmJiB0aGlzLnBhcmFtcy5kYXRhW2ldWzRdID09ICJ2ZWlsYm94Iikgew0KICAgICAgICAgIHRoaXMucGFyYW1zLmRhdGEuc3BsaWNlKGksIDEpOw0KICAgICAgICAgIGktLTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICB2YXIgcmVmLCB1c2VyUmVmOw0KICAgICAgaWYgKHJlY19kYXRhRmxhZykgew0KICAgICAgICByZWYgPSAiZW1haWxzLyIgKyB0aGlzLnVzZXJuYW1lICsgIi9yZWNlaXZlZC8iOw0KICAgICAgICB1c2VyUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYocmVmKTsNCiAgICAgICAgdXNlclJlZi51cGRhdGUocmVjZWl2ZWRfZW1haWxPYmopLnRoZW4oKCkgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJzdWNjZXNzIHJlY2VpdmVkIik7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgICAgaWYgKHNlbnRfZGF0YUZsYWcpIHsNCiAgICAgICAgcmVmID0gImVtYWlscy8iICsgdGhpcy51c2VybmFtZSArICIvc2VudC8iOw0KICAgICAgICB1c2VyUmVmID0gZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYocmVmKTsNCiAgICAgICAgdXNlclJlZi51cGRhdGUoc2VudF9lbWFpbE9iaikudGhlbigoKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2coInN1Y2Nlc3Mgc2VudCIpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICAgIGlmICh2ZWlsX2RhdGFGbGFnKSB7DQogICAgICAgIHJlZiA9ICJlbWFpbHMvIiArIHRoaXMudXNlcm5hbWUgKyAiL3ZlaWxib3gvIjsNCiAgICAgICAgdXNlclJlZiA9IGZpcmViYXNlLmRhdGFiYXNlKCkucmVmKHJlZik7DQogICAgICAgIHVzZXJSZWYudXBkYXRlKHZlaWxib3hfZW1haWxPYmopLnRoZW4oKCkgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKCJzdWNjZXNzIHZlaWxib3giKTsNCiAgICAgICAgfSk7DQogICAgICB9DQogICAgfSwNCiAgICBkZWxldGVNc2coKSB7DQogICAgICB0aGlzLmRlbGV0ZV9yZWNvdmVyX1NlbGVjdGVkTXNnKCJkZWxldGUiKTsNCiAgICAgIHRoaXMucHJpbnRQcmVzZW50VGltZSgpOw0KICAgICAgdGhpcy5zZWxlY3RNc2dGbGFnID0gZmFsc2U7DQogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2xvc2VidG4tZGVsZXRlLW1vZGFsIikuY2xpY2soKTsNCiAgICB9LA0KICAgIHJlY292ZXJNc2coKSB7DQogICAgICB0aGlzLmRlbGV0ZV9yZWNvdmVyX1NlbGVjdGVkTXNnKCJyZWNvdmVyIik7DQogICAgICB0aGlzLnByaW50UHJlc2VudFRpbWUoKTsNCiAgICAgIHRoaXMuc2VsZWN0TXNnRmxhZyA9IGZhbHNlOw0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmVtYWlsID0gZmlyZWJhc2UuYXV0aCgpLmN1cnJlbnRVc2VyLmVtYWlsOw0KICAgIHRoaXMudXNlcm5hbWUgPSB0aGlzLmVtYWlsLnN1YnN0cmluZygwLCB0aGlzLmVtYWlsLmxlbmd0aCAtIDEwKTsNCiAgICB0aGlzLmdldERhdGEoKTsNCiAgfQ0KfTsNCg=="},{"version":3,"sources":["binbox_main.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"binbox_main.vue","sourceRoot":"src/components/binbox","sourcesContent":["<template>\r\n  <div>\r\n    <!-- Topbar will be here -->\r\n    <component v-bind:is=\"'Navbar'\"></component>\r\n    <div class=\"wrapper-body\">\r\n      <!-- Sidebar -->\r\n      <component v-bind:is=\"'Sidebar'\"></component>\r\n      <div class=\"body-container\">\r\n        <div class=\"base-demo\">\r\n          <vue-table-dynamic\r\n            :params=\"params\"\r\n            @selection-change=\"onSelectionChange\"\r\n            v-on:row-click=\"getClickedRow\"\r\n            ref=\"table\"\r\n          ></vue-table-dynamic>\r\n          <div style=\"text-align:center;\" v-if=\"noDataFoundFlag==true\">No data found</div>\r\n        </div>\r\n        <div style=\"text-align:right;color:gray;margin-top:30px;\">\r\n          <p>Last updated at {{ updateTime }}</p>\r\n        </div>\r\n\r\n        <button v-if=\"selectMsgFlag\" class=\"msg-delete-btn msg-recover-btn\" @click=\"recoverMsg\">\r\n          <i class=\"fas fa-redo\"></i>\r\n        </button>\r\n        <button\r\n          v-if=\"selectMsgFlag\"\r\n          class=\"msg-delete-btn\"\r\n          data-toggle=\"modal\"\r\n          data-target=\"#deleteEmailsModal\"\r\n        >\r\n          <i class=\"fas fa-trash-alt\"></i>\r\n        </button>\r\n\r\n        <!-- Modal -->\r\n        <div\r\n          class=\"modal fade\"\r\n          id=\"deleteEmailsModal\"\r\n          tabindex=\"-1\"\r\n          role=\"dialog\"\r\n          aria-labelledby=\"deleteEmailsModalLabel\"\r\n          aria-hidden=\"true\"\r\n        >\r\n          <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n              <div class=\"modal-header\">\r\n                <h5\r\n                  class=\"modal-title\"\r\n                  id=\"deleteEmailsModalLabel\"\r\n                  style=\"color: #ba2937;\"\r\n                >Delete email permanently</h5>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"close\"\r\n                  id=\"closebtn-delete-modal\"\r\n                  data-dismiss=\"modal\"\r\n                  aria-label=\"Close\"\r\n                >\r\n                  <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n              </div>\r\n              <div class=\"modal-body\">\r\n                <p>Are you sure you want to delete selected items?</p>\r\n                <p>\r\n                  <i class=\"fas fa-exclamation-triangle\" style=\"margin-right:10px;\"></i>All selected data will be deleted permanently!\r\n                </p>\r\n              </div>\r\n              <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"eveilbtn\" data-dismiss=\"modal\">No</button>\r\n                <button type=\"button\" class=\"eveilbtn\" @click=\"deleteMsg\">Yes</button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport firebase from \"firebase\";\r\nimport VueTableDynamic from \"vue-table-dynamic\";\r\nexport default {\r\n  data: function() {\r\n    return {\r\n      username: \"\",\r\n      email: \"\",\r\n      selectMsgFlag: false,\r\n      noDataFoundFlag: null,\r\n      updateTime: \" \",\r\n      params: {\r\n        data: [[\"From/To\", \"Title\", \"Description\", \"id\", \"src\"]],\r\n        header: \"row\",\r\n        stripe: true,\r\n        showCheck: true,\r\n        enableSearch: true,\r\n        sort: [0, 1],\r\n        pagination: true,\r\n        pageSize: 10,\r\n        pageSizes: [10, 20, 50],\r\n        columnWidth: [\r\n          { column: 0, width: \"20%\" },\r\n          { column: 1, width: \"30%\" },\r\n          { column: 2, width: \"50%\" },\r\n          { column: 3, width: \"0%\" },\r\n          { column: 4, width: \"0%\" }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  components: { VueTableDynamic },\r\n  methods: {\r\n    getClickedRow(index, data) {\r\n      //console.log(\"getClickedRow  :\", index, data);\r\n      if (index == 0) return;\r\n      var url = \"/message/\" + data[3];\r\n      if (data[4] == \"received\") url += \"/inbox\";\r\n      if (data[4] == \"sent\") url += \"/outbox\";\r\n      if (data[4] == \"veilbox\") url += \"/veilbox\";\r\n      this.$router.push(url);\r\n    },\r\n    getDataFromFirebase(from) {\r\n      var refUser = \"emails/\" + this.username + \"/\" + from;\r\n      var emailsRef = firebase.database().ref(refUser);\r\n      emailsRef.on(\r\n        \"value\",\r\n        data => {\r\n          var alldata = data.val();\r\n          if (alldata != null && alldata != undefined) {\r\n            var keys = Object.keys(alldata);\r\n            keys.reverse();\r\n            keys.forEach(index => {\r\n              if (alldata[index].bin == \"1\") {\r\n                this.noDataFoundFlag = false;\r\n                var temp = new Array(5);\r\n                if (from == \"received\" || from == \"veilbox\")\r\n                  temp[0] = alldata[index].from;\r\n                else if (from == \"sent\") temp[0] = alldata[index].to;\r\n                temp[1] = alldata[index].subject;\r\n                temp[2] = alldata[index].message;\r\n                temp[3] = index;\r\n                if (from == \"received\") temp[4] = \"received\";\r\n                else if (from == \"veilbox\") temp[4] = \"veilbox\";\r\n                else temp[4] = \"sent\";\r\n                this.params.data.push(temp);\r\n              }\r\n            });\r\n          }\r\n        },\r\n        errEmailsData => {\r\n          console.log(errEmailsData);\r\n        }\r\n      );\r\n    },\r\n    getData() {\r\n      this.getDataFromFirebase(\"received\");\r\n      this.getDataFromFirebase(\"sent\");\r\n      this.getDataFromFirebase(\"veilbox\");\r\n      if (this.params.data.length > 1) this.noDataFoundFlag = false;\r\n      else this.noDataFoundFlag = true;\r\n      this.printPresentTime();\r\n    },\r\n    printPresentTime() {\r\n      var today = new Date();\r\n      this.updateTime =\r\n        today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\r\n    },\r\n    onSelectionChange() {\r\n      if (this.$refs.table.getCheckedRowDatas(true).length > 1) {\r\n        this.selectMsgFlag = true;\r\n      } else {\r\n        this.selectMsgFlag = false;\r\n      }\r\n    },\r\n    delete_recover_SelectedMsg(flag) {\r\n      var received_emailObj = new Object();\r\n      var sent_emailObj = new Object();\r\n      var veilbox_emailObj = new Object();\r\n      var rec_dataFlag = false;\r\n      var sent_dataFlag = false;\r\n      var veil_dataFlag = false;\r\n      var val;\r\n      if (flag == \"delete\") val = null;\r\n      else if (flag == \"recover\") val = \"0\";\r\n      for (\r\n        var i = 1;\r\n        i < this.$refs.table.getCheckedRowDatas(true).length;\r\n        i++\r\n      ) {\r\n        var x;\r\n        if (this.$refs.table.getCheckedRowDatas(true)[i][4] == \"received\") {\r\n          x = this.$refs.table.getCheckedRowDatas(true)[i][3] + \"\";\r\n          if (val == \"0\") x += \"/bin\";\r\n          received_emailObj[x] = val;\r\n          rec_dataFlag = true;\r\n        } else if (this.$refs.table.getCheckedRowDatas(true)[i][4] == \"sent\") {\r\n          x = this.$refs.table.getCheckedRowDatas(true)[i][3] + \"\";\r\n          if (val == \"0\") x += \"/bin\";\r\n          sent_emailObj[x] = val;\r\n          sent_dataFlag = true;\r\n        } else if (\r\n          this.$refs.table.getCheckedRowDatas(true)[i][4] == \"veilbox\"\r\n        ) {\r\n          x = this.$refs.table.getCheckedRowDatas(true)[i][3] + \"\";\r\n          if (val == \"0\") x += \"/bin\";\r\n          veilbox_emailObj[x] = val;\r\n          veil_dataFlag = true;\r\n        }\r\n      }\r\n      for (i = 0; i < this.params.data.length; i++) {\r\n        if (rec_dataFlag && this.params.data[i][4] == \"received\") {\r\n          this.params.data.splice(i, 1);\r\n          i--;\r\n        } else if (sent_dataFlag && this.params.data[i][4] == \"sent\") {\r\n          this.params.data.splice(i, 1);\r\n          i--;\r\n        } else if (veil_dataFlag && this.params.data[i][4] == \"veilbox\") {\r\n          this.params.data.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n\r\n      var ref, userRef;\r\n      if (rec_dataFlag) {\r\n        ref = \"emails/\" + this.username + \"/received/\";\r\n        userRef = firebase.database().ref(ref);\r\n        userRef.update(received_emailObj).then(() => {\r\n          console.log(\"success received\");\r\n        });\r\n      }\r\n      if (sent_dataFlag) {\r\n        ref = \"emails/\" + this.username + \"/sent/\";\r\n        userRef = firebase.database().ref(ref);\r\n        userRef.update(sent_emailObj).then(() => {\r\n          console.log(\"success sent\");\r\n        });\r\n      }\r\n      if (veil_dataFlag) {\r\n        ref = \"emails/\" + this.username + \"/veilbox/\";\r\n        userRef = firebase.database().ref(ref);\r\n        userRef.update(veilbox_emailObj).then(() => {\r\n          console.log(\"success veilbox\");\r\n        });\r\n      }\r\n    },\r\n    deleteMsg() {\r\n      this.delete_recover_SelectedMsg(\"delete\");\r\n      this.printPresentTime();\r\n      this.selectMsgFlag = false;\r\n      document.getElementById(\"closebtn-delete-modal\").click();\r\n    },\r\n    recoverMsg() {\r\n      this.delete_recover_SelectedMsg(\"recover\");\r\n      this.printPresentTime();\r\n      this.selectMsgFlag = false;\r\n    }\r\n  },\r\n  created() {\r\n    this.email = firebase.auth().currentUser.email;\r\n    this.username = this.email.substring(0, this.email.length - 10);\r\n    this.getData();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.eveilbtn {\r\n  padding: 5px 20px;\r\n}\r\n.msg-recover-btn {\r\n  right: 90px;\r\n}\r\n</style>"]}]}