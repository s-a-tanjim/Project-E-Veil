(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-447d4303"],{"0c6c":function(e,t,s){},2532:function(e,t,s){"use strict";var a=s("23e7"),i=s("5a34"),n=s("1d80"),l=s("ab13");a({target:"String",proto:!0,forced:!l("includes")},{includes:function(e){return!!~String(n(this)).indexOf(i(e),arguments.length>1?arguments[1]:void 0)}})},"33c1":function(e,t,s){"use strict";var a=s("0c6c"),i=s.n(a);i.a},"44e7":function(e,t,s){var a=s("861d"),i=s("c6b6"),n=s("b622"),l=n("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[l])?!!t:"RegExp"==i(e))}},"5a34":function(e,t,s){var a=s("44e7");e.exports=function(e){if(a(e))throw TypeError("The method doesn't accept regular expressions");return e}},ab13:function(e,t,s){var a=s("b622"),i=a("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(s){try{return t[i]=!1,"/./"[e](t)}catch(a){}}return!1}},caad:function(e,t,s){"use strict";var a=s("23e7"),i=s("4d64").includes,n=s("44d2"),l=s("ae40"),r=l("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!r},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("includes")},f8bb:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Navbar",{tag:"component"}),s("div",{staticClass:"wrapper-body"},[s("Sidebar",{tag:"component"}),s("div",{staticClass:"body-container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-12 col-md-10 col-lg-8 col-xl-8"},[s("form",{staticClass:"compose-container"},[e._m(0),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"receiver_email"}},[e._v("To")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.receiver_email,expression:"receiver_email"}],staticClass:"form-control",attrs:{type:"email",id:"receiver_email",placeholder:"email@eveil.com"},domProps:{value:e.receiver_email},on:{input:function(t){t.target.composing||(e.receiver_email=t.target.value)}}}),s("small",{staticClass:"error-msg",attrs:{id:"invalidEmail"}},[e._v("Invalid Email!")])]),s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.subject,expression:"subject"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Subject"},domProps:{value:e.subject},on:{input:function(t){t.target.composing||(e.subject=t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],staticClass:"form-control",attrs:{type:"text",rows:"4",placeholder:"Enter your message"},domProps:{value:e.message},on:{input:function(t){t.target.composing||(e.message=t.target.value)}}})]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 left-btn-container"},[s("button",{staticClass:"eveilbtn",attrs:{type:"submit"},on:{click:e.sendNormalEmail}},[e._v("Send")])]),s("div",{staticClass:"col-12 col-sm-12 col-md-6 col-lg-6 col-xl-6 right-btn-container"},[s("button",{staticClass:"eveilbtn",attrs:{type:"submit"},on:{click:e.sendEmailAnonymously}},[e._v("Send Anonymously")])])])])])])])],1),s("button",{staticStyle:{display:"none"},attrs:{id:"successfully-sent-modal-btn","data-toggle":"modal","data-target":"#successfully-sent-modal"}}),e._m(1)],1)},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-md-6 col-lg-6 col-xl-6 error-msg",staticStyle:{"text-align":"center"},attrs:{id:"emptyFieldError"}},[e._v("Field can't be empty!")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal fade",attrs:{id:"successfully-sent-modal",tabindex:"-1",role:"dialog","aria-labelledby":"successfully-sent-modalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content success-color"},[s("div",{staticClass:"modal-header",staticStyle:{"border-bottom":"none"}},[s("h5",{staticClass:"modal-title",attrs:{id:"successfully-sent-modalLabel"}},[e._v("Email Sent Successfully!")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[e._v("Ã—")])])])])])])}],n=(s("caad"),s("2532"),s("8aa5")),l=s.n(n),r={data:function(){return{receiver_email:"",subject:"",message:"",email:"",username:"",time:"",date:"",canSendFlag:!1,mailType:"",counterIncFlag:!1,send_count:0}},methods:{sendNormalEmail:function(e){e.preventDefault(),this.mailType="Normal",this.sendEmail()},sendEmailAnonymously:function(e){e.preventDefault(),this.mailType="Anonymous",this.sendEmail()},sendEmail:function(){""==this.receiver_email||""==this.subject||""==this.message?document.getElementById("emptyFieldError").style.display="block":(document.getElementById("emptyFieldError").style.display="none",0==this.verifySender()&&(document.getElementById("invalidEmail").style.display="block"))},verifySender:function(){var e=this;if(this.receiver_email.length<11)return!1;if(!this.receiver_email.includes("@eveil.com"))return!1;var t=this.receiver_email.substring(0,this.receiver_email.length-10),s="user/"+t,a=l.a.database().ref(s);a.on("value",(function(t){var s=t.val();null!==s&&void 0!==s?(document.getElementById("invalidEmail").style.display="none",e.canSendFlag=!0):document.getElementById("invalidEmail").style.display="block"}),(function(e){return console.log(e),!1}))},updateReceiver:function(){var e,t,s,a=this.receiver_email.substring(0,this.receiver_email.length-10);"Normal"==this.mailType?(e="emails/"+a+"/received",t=l.a.database().ref(e),s=t.push(),s.set({from:this.email,subject:this.subject,message:this.message,bin:"0",seen:"0",time:this.time,date:this.date})):(e="emails/"+a+"/veilbox",t=l.a.database().ref(e),s=t.push(),s.set({from:"Anonymous",subject:this.subject,message:this.message,bin:"0",seen:"0",time:this.time,date:this.date}))},getTime:function(){var e=new Date;this.time=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds(),this.date=e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear()},updateSender:function(){var e=this,t="emails/"+this.username+"/sent",s=l.a.database().ref(t),a=s.push();a.set({to:this.receiver_email,subject:this.subject,message:this.message,bin:"0",time:this.time,date:this.date}),t="user/"+this.username,s=l.a.database().ref(t),s.on("value",(function(t){e.send_count=t.val().sent_email,e.counterIncFlag=!0}),(function(e){console.log(e)}))},resetForm:function(){this.receiver_email="",this.subject="",this.message="",document.getElementById("successfully-sent-modal-btn").click()}},created:function(){this.email=l.a.auth().currentUser.email,this.username=this.email.substring(0,this.email.length-10)},watch:{canSendFlag:function(){this.canSendFlag&&(this.getTime(),this.updateReceiver(),this.updateSender(),this.resetForm()),this.canSendFlag=!1},counterIncFlag:function(){if(this.counterIncFlag){var e="user/"+this.username;this.send_count++;var t=l.a.database().ref(e);t.update({sent_email:this.send_count})}this.counterIncFlag=!1}}},c=r,o=(s("33c1"),s("2877")),d=Object(o["a"])(c,a,i,!1,null,"3ea62530",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-447d4303.fc4655ae.js.map