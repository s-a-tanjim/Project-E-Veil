{"version":3,"sources":["webpack:///./src/components/outbox/outbox_main.vue?765c","webpack:///src/components/outbox/outbox_main.vue","webpack:///./src/components/outbox/outbox_main.vue?4ea8","webpack:///./src/components/outbox/outbox_main.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","tag","staticClass","ref","attrs","params","on","onSelectionChange","getClickedRow","staticStyle","_v","_s","updateTime","deleteMsg","_e","staticRenderFns","data","username","email","selectMsgFlag","header","stripe","showCheck","enableSearch","sort","pagination","pageSize","pageSizes","columnWidth","components","methods","index","url","$router","push","getDataFromFirebase","refUser","emailsRef","printPresentTime","today","Date","$refs","table","getCheckedRowDatas","length","emailObj","Object","x","i","pop","userRef","update","then","created","substring","component"],"mappings":"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","file":"js/chunk-2d0e9578.1e3b7191.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Navbar',{tag:\"component\"}),_c('div',{staticClass:\"wrapper-body\"},[_c('Sidebar',{tag:\"component\"}),_c('div',{staticClass:\"body-container\"},[_c('div',{staticClass:\"base-demo\"},[_c('vue-table-dynamic',{ref:\"table\",attrs:{\"params\":_vm.params},on:{\"selection-change\":_vm.onSelectionChange,\"row-click\":_vm.getClickedRow}}),_c('div',{staticStyle:{\"text-align\":\"center\",\"display\":\"none\"},attrs:{\"id\":\"no-data-error\"}},[_vm._v(\"No data found\")])],1),_c('div',{staticStyle:{\"text-align\":\"right\",\"color\":\"gray\",\"margin-top\":\"30px\"}},[_c('p',[_vm._v(\"Last updated at \"+_vm._s(_vm.updateTime))])]),(_vm.selectMsgFlag)?_c('button',{staticClass:\"msg-delete-btn\",on:{\"click\":_vm.deleteMsg}},[_c('i',{staticClass:\"fas fa-trash-alt\"})]):_vm._e()])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- Topbar will be here -->\r\n    <component v-bind:is=\"'Navbar'\"></component>\r\n    <div class=\"wrapper-body\">\r\n      <!-- Sidebar -->\r\n      <component v-bind:is=\"'Sidebar'\"></component>\r\n      <div class=\"body-container\">\r\n        <div class=\"base-demo\">\r\n          <vue-table-dynamic\r\n            :params=\"params\"\r\n            @selection-change=\"onSelectionChange\"\r\n            v-on:row-click=\"getClickedRow\"\r\n            ref=\"table\"\r\n          ></vue-table-dynamic>\r\n          <div style=\"text-align:center;display:none;\" id=\"no-data-error\">No data found</div>\r\n        </div>\r\n        <div style=\"text-align:right;color:gray;margin-top:30px;\">\r\n          <p>Last updated at {{ updateTime }}</p>\r\n        </div>\r\n        <button v-if=\"selectMsgFlag\" class=\"msg-delete-btn\" @click=\"deleteMsg\">\r\n          <i class=\"fas fa-trash-alt\"></i>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport firebase from \"firebase\";\r\nimport VueTableDynamic from \"vue-table-dynamic\";\r\nexport default {\r\n  data: function() {\r\n    return {\r\n      username: \"\",\r\n      email: \"\",\r\n      selectMsgFlag: false,\r\n      updateTime: \" \",\r\n      params: {\r\n        data: [[\"To\", \"Title\", \"Description\", \"id\"]],\r\n        header: \"row\",\r\n        stripe: true,\r\n        showCheck: true,\r\n        enableSearch: true,\r\n        sort: [0, 1],\r\n        pagination: true,\r\n        pageSize: 10,\r\n        pageSizes: [10, 20, 50],\r\n        columnWidth: [\r\n          { column: 0, width: \"20%\" },\r\n          { column: 1, width: \"30%\" },\r\n          { column: 2, width: \"50%\" },\r\n          { column: 3, width: \"0%\" }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  components: { VueTableDynamic },\r\n  methods: {\r\n    getClickedRow(index, data) {\r\n      //console.log(\"getClickedRow  :\", index, data);\r\n      if (index == 0) return;\r\n      var url = \"/message/\" + data[3] + \"/outbox\";\r\n      this.$router.push(url);\r\n    },\r\n    getDataFromFirebase() {\r\n      var refUser = \"emails/\" + this.username + \"/sent\";\r\n      var emailsRef = firebase.database().ref(refUser);\r\n      emailsRef.on(\r\n        \"value\",\r\n        data => {\r\n          var alldata = data.val();\r\n          if (alldata === null || alldata === undefined) {\r\n            document.getElementById(\"no-data-error\").style.display = \"block\";\r\n          } else {\r\n            document.getElementById(\"no-data-error\").style.display = \"none\";\r\n            var keys = Object.keys(alldata);\r\n            keys.reverse();\r\n            keys.forEach(index => {\r\n              if (alldata[index].bin == \"0\") {\r\n                var temp = new Array(4);\r\n                temp[0] = alldata[index].to;\r\n                temp[1] = alldata[index].subject;\r\n                temp[2] = alldata[index].message;\r\n                temp[3] = index;\r\n                this.params.data.push(temp);\r\n              }\r\n            });\r\n          }\r\n          this.printPresentTime();\r\n        },\r\n        errEmailsData => {\r\n          console.log(errEmailsData);\r\n        }\r\n      );\r\n    },\r\n    printPresentTime() {\r\n      var today = new Date();\r\n      this.updateTime =\r\n        today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\r\n    },\r\n    onSelectionChange() {\r\n      if (this.$refs.table.getCheckedRowDatas(true).length > 1) {\r\n        this.selectMsgFlag = true;\r\n      } else {\r\n        this.selectMsgFlag = false;\r\n      }\r\n    },\r\n    deleteMsg() {\r\n      var emailObj = new Object();\r\n      for (\r\n        var i = 1;\r\n        i < this.$refs.table.getCheckedRowDatas(true).length;\r\n        i++\r\n      ) {\r\n        var x = this.$refs.table.getCheckedRowDatas(true)[i][3] + \"/bin\";\r\n        emailObj[x] = \"1\";\r\n      }\r\n      while (this.params.data.length > 1) {\r\n        this.params.data.pop();\r\n      }\r\n      var ref = \"emails/\" + this.username + \"/sent/\";\r\n      var userRef = firebase.database().ref(ref);\r\n      userRef.update(emailObj).then(() => {\r\n        this.printPresentTime();\r\n        this.selectMsgFlag = false;\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    this.email = firebase.auth().currentUser.email;\r\n    this.username = this.email.substring(0, this.email.length - 10);\r\n    this.getDataFromFirebase();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outbox_main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./outbox_main.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./outbox_main.vue?vue&type=template&id=1de16944&scoped=true&\"\nimport script from \"./outbox_main.vue?vue&type=script&lang=js&\"\nexport * from \"./outbox_main.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1de16944\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}